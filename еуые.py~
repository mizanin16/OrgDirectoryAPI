from alembic import op
import sqlalchemy as sa

def upgrade():
    # Удалите первичный ключ
    op.drop_constraint('pk_organization_activity', 'organization_activity', type_='primary')

    # Измените столбец
    op.alter_column('organization_activity', 'activity_id', nullable=True)

    # Восстановите первичный ключ
    op.create_primary_key('pk_organization_activity', 'organization_activity', ['organization_id', 'activity_id'])

def downgrade():
    # Удалите первичный ключ
    op.drop_constraint('pk_organization_activity', 'organization_activity', type_='primary')

    # Измените столбец обратно
    op.alter_column('organization_activity', 'activity_id', nullable=False)

    # Восстановите первичный ключ
    op.create_primary_key('pk_organization_activity', 'organization_activity', ['organization_id', 'activity_id'])